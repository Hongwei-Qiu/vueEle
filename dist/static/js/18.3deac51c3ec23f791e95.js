webpackJsonp([18],{"446P":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("mvHQ"),i=a.n(s),r=a("BO1k"),n=a.n(r),o={data:function(){return{multipleTable:"",resourceCheckedKey:[],loading:!0,tableData:[],defaultProps:{children:"selfNext",label:"name"},id:this.$route.query.id,mId:""}},created:function(){this.sonList()},methods:{submit:function(){var t=this,e=this.$refs.tree.getCheckedKeys().concat(this.$refs.tree.getHalfCheckedKeys());this.mId=e.join(","),console.log(this.mId);var a={headers:{"api-token":this.$sign(),Authorization:this.http.vtoken}},s={id:this.id,menuId:this.mId};this.http.axios.post(this.http.url+"role/authorize",s,a).then(function(e){0==e.data.errCode?(t.$message.success("授权成功"),t.sonList()):t.$message.warning("授权失败")}).catch(function(t){})},resetChecked:function(){for(var t in this.tableData)this.tableData[t].isSelect&&console.log(this.tableData[t].selfNext[1].selfNext)},sonList:function(){var t=this,e={headers:{"api-token":this.$sign(),Authorization:this.http.vtoken}};this.http.axios.get(this.http.url+"role/getMenu?id="+this.id,e).then(function(e){t.tableData=[];var a=e.data.data,s=t,r=!0,o=!1,c=void 0;try{for(var l,h=n()(a);!(r=(l=h.next()).done);r=!0){var d=l.value,u=JSON.parse(i()(d).replace(/sonList/g,"selfNext"));t.tableData.push(u)}}catch(t){o=!0,c=t}finally{try{!r&&h.return&&h.return()}finally{if(o)throw c}}setTimeout(function(){s.loading=!1},500)})}}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-body"},[a("div",{staticClass:"page-header"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[t._v("首页")]),t._v(" "),a("el-breadcrumb-item",[t._v("人员管理")]),t._v(" "),a("el-breadcrumb-item",[t._v("授权")])],1)],1),t._v(" "),a("div",{staticClass:"box"},[a("el-tree",{ref:"tree",attrs:{data:t.tableData,"show-checkbox":"","node-key":"id","default-checked-keys":t.resourceCheckedKey,"highlight-current":"",props:t.defaultProps}}),t._v(" "),a("m-button",{attrs:{type:"success"},on:{click:t.submit}},[t._v("提交")]),t._v(" "),a("el-button",{on:{click:t.resetChecked}},[t._v("清空")])],1)])},staticRenderFns:[]};var l=a("VU/8")(o,c,!1,function(t){a("HusA")},"data-v-7a25fc1d",null);e.default=l.exports},HusA:function(t,e){}});
//# sourceMappingURL=18.3deac51c3ec23f791e95.js.map