webpackJsonp([23],{"+eJK":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r("mvHQ"),a=r.n(s),i=r("BO1k"),n=r.n(i),o={data:function(){return{loading:!0,tableData:[],defaultProps:{children:"selfNext",label:"name"},id:this.$route.query.id,mId:""}},created:function(){this.sonList()},methods:{submit:function(){var e=this,t=this.$refs.tree.getCheckedKeys().concat(this.$refs.tree.getHalfCheckedKeys());this.mId=t.join(",");var r={headers:{"api-token":this.$sign(),Authorization:this.http.vtoken}},s={id:this.id,menuId:this.mId};this.http.axios.post(this.http.url+"role/authorize",s,r).then(function(t){0==t.data.errCode?(e.$message.success("授权成功"),e.sonList()):e.$message.warning("授权失败")}).catch(function(e){})},resetChecked:function(){this.$refs.tree.setCheckedKeys([])},sonList:function(){var e=this,t={headers:{"api-token":this.$sign(),Authorization:this.http.vtoken}};this.http.axios.get(this.http.url+"role/getMenu?id="+this.id,t).then(function(t){e.tableData=[];var r=t.data.data,s=e,i=!0,o=!1,l=void 0;try{for(var c,h=n()(r);!(i=(c=h.next()).done);i=!0){var u=c.value,d=JSON.parse(a()(u).replace(/sonList/g,"selfNext"));e.tableData.push(d)}}catch(e){o=!0,l=e}finally{try{!i&&h.return&&h.return()}finally{if(o)throw l}}var f=[],v=!0,p=!1,y=void 0;try{for(var b,m=n()(e.tableData);!(v=(b=m.next()).done);v=!0){if((u=b.value).isSelect&&u.selfNext){var g=!0,k=!1,x=void 0;try{for(var _,C=n()(u.selfNext);!(g=(_=C.next()).done);g=!0){if((u=_.value).isSelect&&!u.selfNext)f.push(u.id),e.$refs.tree.setCheckedKeys(f);else if(u.isSelect&&u.selfNext){var $=!0,w=!1,N=void 0;try{for(var D,K=n()(u.selfNext);!($=(D=K.next()).done);$=!0){(u=D.value).isSelect&&(f.push(u.id),e.$refs.tree.setCheckedKeys(f))}}catch(e){w=!0,N=e}finally{try{!$&&K.return&&K.return()}finally{if(w)throw N}}}}}catch(e){k=!0,x=e}finally{try{!g&&C.return&&C.return()}finally{if(k)throw x}}}}}catch(e){p=!0,y=e}finally{try{!v&&m.return&&m.return()}finally{if(p)throw y}}setTimeout(function(){s.loading=!1},500)})}}},l={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"page-body"},[r("div",{staticClass:"page-header"},[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),r("el-breadcrumb-item",[e._v("人员管理")]),e._v(" "),r("el-breadcrumb-item",[e._v("授权")])],1)],1),e._v(" "),r("div",{staticClass:"box"},[r("el-tree",{ref:"tree",attrs:{data:e.tableData,"show-checkbox":"","node-key":"id","highlight-current":"",props:e.defaultProps}}),e._v(" "),r("m-button",{attrs:{type:"success"},on:{click:e.submit}},[e._v("提交")]),e._v(" "),r("el-button",{on:{click:e.resetChecked}},[e._v("清空")])],1)])},staticRenderFns:[]};var c=r("VU/8")(o,l,!1,function(e){r("DTfW")},null,null);t.default=c.exports},DTfW:function(e,t){}});
//# sourceMappingURL=23.db440a1c6187b72feb37.js.map